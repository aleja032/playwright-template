# Project Configuration for AI Agents (opencode)

This file summarizes the essential commands, architectural patterns, and file structure necessary to work within this Playwright E2E and API testing framework. All changes must adhere to the principles outlined in AGENTS.md.

## 1. Essential Commands

| Action | Command | Notes |
| :--- | :--- | :--- |
| **Run All Tests** | `npm test` | Default execution |
| **Run Single Spec** | `npx playwright test tests/login.spec.ts` | Example of running a specific file |
| **Show Report** | `npm run report` | Generates and opens the HTML report |
| **Headed Mode** | `npm run test:headed` | Useful for visual debugging |

## 2. Mandatory Architectural Constraints

All code (E2E and API) MUST follow these rules:

| Rule | Requirement | Location |
| :--- | :--- | :--- |
| **Page Object Model (POM)** | All UI interactions must go through Page Objects. | `pages/` |
| **API Controllers** | All API interactions must use API Controllers. | `pages/` |
| **Fixtures** | Page Objects and Controllers MUST be exposed as fixtures. | `fixtures/custom-fixtures.ts` |
| **Imports** | `test` and `expect` must be imported ONLY from `../fixtures/custom-fixtures`. | Test Specs |
| **Data** | Test data must be externalized. NO hardcoding of credentials/URLs. | `data-driven/` |

## 3. Workflow for New Features/Tests

Follow this strict order:

1.  **Data JSON:** Create `data-driven/[feature]-data.json`.
2.  **Implementation:** Create Page Object (`pages/[Feature]Page.ts`) or API Controller (`pages/[Feature]Controller.ts`).
3.  **Fixture:** Update `fixtures/custom-fixtures.ts`.
4.  **Test Spec:** Create `tests/[feature].spec.ts` and import from fixtures.

## 4. Selector Preference

1.  **Primary:** `data-testid` (Mandatory preference).
2.  **Secondary:** `getByRole` or `getByText`.
3.  **Avoid:** Raw CSS or XPath selectors.

## 5. API Testing Requirement

When testing APIs, tests **MUST** explicitly assert the HTTP status code (e.g., `expect(response.status()).toBe(200)`).
